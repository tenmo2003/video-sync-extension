<!DOCTYPE html>
<html>
<head>
  <style>
    body { width: 280px; padding: 10px; font-family: sans-serif; }
    .status { padding: 6px 10px; border-radius: 4px; margin: 8px 0; font-size: 13px; }
    .status.success { background: #d4edda; color: #155724; }
    .status.error { background: #f8d7da; color: #721c24; }
    .status.info { background: #cce5ff; color: #004085; }
    .status.warning { background: #fff3cd; color: #856404; }
    #connect-btn { margin-top: 8px; }
    #host-id { width: 100%; box-sizing: border-box; padding: 6px; }
    .id-row { display: flex; align-items: center; gap: 8px; margin: 8px 0; }
    .id-row span { flex: 1; word-break: break-all; font-family: monospace; font-size: 12px; }
    #copy-btn { padding: 4px 8px; cursor: pointer; font-size: 12px; }
    #copy-btn.copied { background: #d4edda; }
    .connected-peers { margin-top: 8px; }
    .connected-peers h4 { margin: 4px 0; font-size: 13px; }
    .peer-list { font-family: monospace; font-size: 13px; padding: 6px; background: #f5f5f5; border-radius: 4px; max-height: 100px; overflow-y: auto; }
    .peer-list:empty::before { content: "No peers connected"; color: #888; }
    .peer-item { padding: 5px 0; word-break: break-all; display: flex; justify-content: space-between; align-items: center; }
    .peer-item .peer-id { flex: 1; }
    .peer-item .disconnect-btn { font-size: 11px; padding: 2px 6px; cursor: pointer; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 3px; color: #721c24; }
    .peer-item .disconnect-btn:hover { background: #f1b0b7; }
    .peer-item .promote-btn { font-size: 11px; padding: 2px 6px; cursor: pointer; background: #d4edda; border: 1px solid #c3e6cb; border-radius: 3px; color: #155724; margin-right: 4px; }
    .peer-item .promote-btn:hover { background: #b1dfbb; }
    .peer-item.requesting { background: #fff3cd; border-radius: 3px; padding-y: 4px; margin: 2px 0; }
    #disconnect-all { margin-top: 8px; font-size: 12px; padding: 4px 8px; cursor: pointer; display: none; }
    #disconnect-all.end-party { background: #dc3545; border: 1px solid #c82333; color: white; }
    #disconnect-all.end-party:hover { background: #c82333; }
    #connect-section { margin-top: 8px; }
    #connect-section.hidden { display: none; }
    #role-indicator { padding: 6px 10px; border-radius: 4px; margin: 8px 0; font-size: 13px; font-weight: bold; display: none; text-align: center; }
    #role-indicator.host { background: #d4edda; color: #155724; }
    #role-indicator.guest { background: #e2e3e5; color: #383d41; }
    #request-host-btn { margin-top: 8px; font-size: 12px; padding: 4px 8px; cursor: pointer; display: none; background: #ffc107; border: 1px solid #e0a800; color: #212529; }
    #request-host-btn:hover { background: #e0a800; }
    .nickname-row { margin-bottom: 8px; display: flex; gap: 6px; }
    #nickname-input { flex: 1; box-sizing: border-box; padding: 6px; font-size: 13px; }
    #nickname-save-btn { padding: 6px 10px; cursor: pointer; font-size: 12px; }
    #nickname-save-btn.saved { background: #d4edda; }
    .peer-nickname { font-weight: bold; cursor: help; }
    #invite-btn { width: 100%; padding: 8px; cursor: pointer; font-size: 13px; background: #007bff; color: white; border: 1px solid #0069d9; border-radius: 4px; margin: 8px 0; display: block; }
    #invite-btn:hover { background: #0069d9; }
    #invite-btn.copied { background: #28a745; border-color: #28a745; }
    #invite-btn:disabled { background: #6c757d; border-color: #6c757d; cursor: not-allowed; }
  </style>
</head>
<body>
  <h3>Video Sync</h3>
  <div id="video-status" class="status info" style="display: none;">Checking for video...</div>
  <div id="main-content">
  <div class="nickname-row">
    <input type="text" id="nickname-input" placeholder="Enter your nickname..." maxlength="20">
    <button id="nickname-save-btn">Save</button>
  </div>
  <div class="id-row">
    <strong>My ID:</strong>
    <span id="my-id">Generating...</span>
    <button id="copy-btn" title="Copy ID">Copy</button>
  </div>
  <button id="invite-btn" disabled title="Copy invite link to clipboard">Copy Invite Link</button>
  <div id="role-indicator"></div>
  <div id="connection-status" class="status info">Not connected</div>
  <div class="connected-peers">
    <h4 id="peers-heading">Connected Peers:</h4>
    <div id="peer-list" class="peer-list"></div>
    <button id="request-host-btn">Request Host Control</button>
    <button id="disconnect-all">Leave Room</button>
  </div>
  <div id="connect-section">
    <hr>
    <input type="text" id="host-id" placeholder="Host's ID">
    <button id="connect-btn">Connect</button>
  </div>
  </div>
  <hr>
  <a href="#" id="settings-link" style="font-size: 12px; color: #666;">Settings</a>
  <script src="popup.js"></script>
</body>
</html>
