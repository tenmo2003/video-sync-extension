<!DOCTYPE html>
<html>
<head>
  <style>
    body { width: 280px; padding: 10px; font-family: sans-serif; }
    .status { padding: 6px 10px; border-radius: 4px; margin: 8px 0; font-size: 13px; }
    .status.success { background: #d4edda; color: #155724; }
    .status.error { background: #f8d7da; color: #721c24; }
    .status.info { background: #cce5ff; color: #004085; }
    .status.warning { background: #fff3cd; color: #856404; }
    #connect-btn { margin-top: 8px; }
    #friend-id { width: 100%; box-sizing: border-box; padding: 6px; }
    .id-row { display: flex; align-items: center; gap: 8px; margin: 8px 0; }
    .id-row span { flex: 1; word-break: break-all; font-family: monospace; font-size: 12px; }
    #copy-btn { padding: 4px 8px; cursor: pointer; font-size: 12px; }
    #copy-btn.copied { background: #d4edda; }
    .connected-peers { margin-top: 8px; }
    .connected-peers h4 { margin: 4px 0; font-size: 13px; }
    .peer-list { font-family: monospace; font-size: 11px; padding: 6px; background: #f5f5f5; border-radius: 4px; max-height: 80px; overflow-y: auto; }
    .peer-list:empty::before { content: "No peers connected"; color: #888; }
    .peer-item { padding: 4px 0; word-break: break-all; display: flex; justify-content: space-between; align-items: center; }
    .peer-item .peer-id { flex: 1; }
    .peer-item .disconnect-btn { font-size: 10px; padding: 2px 6px; cursor: pointer; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 3px; color: #721c24; }
    .peer-item .disconnect-btn:hover { background: #f1b0b7; }
    .peer-item .promote-btn { font-size: 10px; padding: 2px 6px; cursor: pointer; background: #d4edda; border: 1px solid #c3e6cb; border-radius: 3px; color: #155724; margin-right: 4px; }
    .peer-item .promote-btn:hover { background: #b1dfbb; }
    .peer-item.requesting { background: #fff3cd; border-radius: 3px; padding: 4px; margin: 2px 0; }
    #disconnect-all { margin-top: 8px; font-size: 12px; padding: 4px 8px; cursor: pointer; display: none; }
    #role-indicator { padding: 6px 10px; border-radius: 4px; margin: 8px 0; font-size: 13px; font-weight: bold; display: none; }
    #role-indicator.host { background: #d4edda; color: #155724; }
    #role-indicator.guest { background: #e2e3e5; color: #383d41; }
    #request-host-btn { margin-top: 8px; font-size: 12px; padding: 4px 8px; cursor: pointer; display: none; background: #ffc107; border: 1px solid #e0a800; color: #212529; }
    #request-host-btn:hover { background: #e0a800; }
  </style>
</head>
<body>
  <h3>Video Sync</h3>
  <div id="video-status" class="status info">Checking for video...</div>
  <div class="id-row">
    <strong>My ID:</strong>
    <span id="my-id">Generating...</span>
    <button id="copy-btn" title="Copy ID">Copy</button>
  </div>
  <div id="connection-status" class="status info">Not connected</div>
  <div id="role-indicator"></div>
  <div class="connected-peers">
    <h4>Connected Peers:</h4>
    <div id="peer-list" class="peer-list"></div>
    <button id="request-host-btn">Request Host Control</button>
    <button id="disconnect-all">Disconnect All</button>
  </div>
  <hr>
  <input type="text" id="friend-id" placeholder="Friend's ID">
  <button id="connect-btn">Connect</button>
  <hr>
  <a href="#" id="settings-link" style="font-size: 12px; color: #666;">Settings</a>
  <script src="popup.js"></script>
</body>
</html>
